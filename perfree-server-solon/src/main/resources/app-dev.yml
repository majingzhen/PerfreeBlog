version: 4.0.1
server:
  port: 8080
  encoding: UTF-8
  session:
    timeout: 7200
    state:
      jwt:
              name: "token"
              secret: "perfree"
  request:
    maxBodySize: -1    # 对应原来的max-file-size
    maxFileSize: -1    # 对应原来的max-request-size

solon.logging:
  logger:
    "root": "INFO"
  appender:
    file:
      name: "file"
      pattern: "%d{yyyy-MM-dd HH:mm:ss:sss} %-5level %logger{36} - %msg%n"
      path: "./resources/logs"
      rolling: "logs/perfree.log"
      maxFileSize: "10MB"
      maxHistory: 7
      maxSize: "100MB"

perfree:
  security:
    # ip黑名单
    ips:
      - 1.1.1.1
    whites:
      - /api/login
      - /api/captchaImage
  autoLoadDevPlugin: true
  autoLoadDevPluginTime: 10000
  demoModel: false



solon.app:
  name: "perfree-server"
  group: "com.perfree"

# 数据源配置
solon.dataSources:
  perfree:
    class: "com.zaxxer.hikari.HikariDataSource"
    jdbcUrl: "jdbc:mysql://perfree:3306/perfree?useSSL=false&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8&nullCatalogMeansCurrent=true"
    username: "perfree"
    password: "HiimaWf3YeyL4mej"
    driverClassName: "com.mysql.cj.jdbc.Driver"
    hikariCP:
      minimumIdle: 30
      maximumPoolSize: 300
      connectionTimeout: 30000
      idleTimeout: 600000
      maxLifetime: 1800000
      poolName: "perfree"
      autoCommit: true

# MyBatis Plus 配置
mybatis.perfree:
  typeAliases:
    - "com.perfree.*.model"
  mappers:
    - "com.perfree.mapper"
    - "classpath:mapper/*.xml"
  configuration:
    cacheEnabled: false
    mapUnderscoreToCamelCase: false
    mapperVerifyEnabled: false
    logImpl: "org.apache.ibatis.logging.stdout.StdOutImpl"
  globalConfig:
    dbConfig:
      idType: "NONE"

# OpenAPI配置 (使用solon-openapi2-knife4j)
solon.openapi:
  name: "Perfree API"
  version: "4.0.1"
  description: "Perfree API Documentation"
  # 配置扫描包路径
  scan:
    packages: ["com.perfree.controller"]
  # knife4j增强配置
  knife4j:
    enable: true
    setting:
      language: zh_cn
      enableVersion: true
      enableHomeCustom: true
      enableFooterCustom: true
      footerCustomContent: "MIT License | Copyright  2024-[PerfreeBase](https://base.perfree.org.cn)"
    cors: false
    production: false
    basic:
      enable: false
      username: test
      password: 12313
  # API分组配置
  groups:
    - name: "common"
      title: "公共接口(无需登录)"
      packages: ["com.perfree.controller.common"]
    - name: "auth"
      title: "认证接口(需登录)"
      packages: ["com.perfree.controller.auth"]
    - name: "view"
      title: "视图接口(界面渲染)"
      packages: ["com.perfree.controller.view"]
    - name: "other"
      title: "其他接口"
      excludePackages: 
        - "com.perfree.controller.view"
        - "com.perfree.controller.auth"
        - "com.perfree.controller.common"

# Perfree自定义配置